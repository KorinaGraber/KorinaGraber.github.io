import{a as U,b as q,c as K,h as Q,j as W}from"./chunk-4JCQ7QFX.js";import{c as X,d as F,f as E,g as I,h as T}from"./chunk-XAZLOLJU.js";import{$a as k,Ia as _,Ka as c,M as G,Na as y,O as R,Oa as N,P as D,Pa as V,Qa as A,Ra as a,Sa as n,Ta as x,U as h,Ua as M,Va as m,W as u,Wa as s,X as $,Za as b,_a as Y,ab as H,bb as z,ca as g,da as v,ia as B,r as P,ta as L,vb as J,wa as d}from"./chunk-R53I6P5H.js";var w=(r=>(r.hidden="hidden",r.revealed="revealed",r.removed="removed",r))(w||{}),l=class{id=0;name="Sample card";image="";suit="";value=0;state="hidden";constructor(e){e&&(this.id=e.id,this.name=e.name,this.image=e.image,this.suit=e.suit,this.value=e.value)}};function ie(i,e){i&1&&x(0,"div",0)}function re(i,e){if(i&1){let t=M();a(0,"div",2),m("click",function(C){g(t);let O=s();return v(O.cardClicked.emit(C))}),a(1,"div",3),x(2,"img",4),n(),a(3,"div",5),x(4,"img",6),n()()}if(i&2){let t=s();c("@cardFlip",t.card.state),d(4),c("src",t.card.image,L)("alt",t.card.name)}}var S=class i{card;cardClicked=new B;CardState=w;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=u({type:i,selectors:[["app-card"]],inputs:{card:"card"},outputs:{cardClicked:"cardClicked"},standalone:!0,features:[k],decls:2,vars:1,consts:[[1,"card-missing"],[1,"card"],[1,"card",3,"click"],[1,"face","back"],["src","CardBackBlue.png","alt","Hidden card"],[1,"face","front"],[3,"src","alt"]],template:function(t,r){t&1&&_(0,ie,1,0,"div",0)(1,re,5,3,"div",1),t&2&&y(!r.card||r.card.state==r.CardState.removed?0:1)},styles:["[_nghost-%COMP%]{display:block;perspective:600px}.card[_ngcontent-%COMP%]{margin:1em;box-shadow:10px 10px 43px -18px #000000bf;border-radius:5px;height:150px;width:100px;cursor:pointer;position:relative;transform-style:preserve-3d}.face[_ngcontent-%COMP%]{display:block;position:absolute;width:100%;height:100%;border-radius:inherit;backface-visibility:hidden}.face[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:inherit}.front[_ngcontent-%COMP%]{transform:rotateY(180deg)}.card-missing[_ngcontent-%COMP%]{margin:1em;border-radius:5px;height:150px;width:100px;position:relative}"],data:{animation:[X("cardFlip",[I("hidden",E({transform:"none"})),I("revealed",E({transform:"rotateY(180deg)"})),T("hidden -> revealed",[F("400ms")]),T("revealed -> hidden",[F("200ms")])])]}})};var p=class i{http=h(U);getSortedDeck(){return this.http.get("/card-deck.json").pipe(P(this.parseJsonCardData))}getShuffledDeck(){return this.getSortedDeck().pipe(P(this.shuffleDeck))}parseJsonCardData(e){return e?e.map(r=>new l(r)):[]}shuffleDeck(e){let t=e.length;for(;t!=0;){let r=Math.floor(Math.random()*t);t--,[e[t],e[r]]=[e[r],e[t]]}return e}static \u0275fac=function(t){return new(t||i)};static \u0275prov=R({token:i,factory:i.\u0275fac})},f=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=$({type:i});static \u0275inj=D({providers:[p,q(K())]})};var ae={pickACard:"Select a card to reveal",pickSecondCard:"Pick a matching card",repickError:"You must choose a different card to match with",matchSuccess:"You found a match! Click anywhere to clear both cards",matchFailure:"Better luck next time. Click anywhere to hide both cards and try again"},o=ae;function ne(i,e){i&1&&(a(0,"div",3),b(1,"Congratulations, you won!"),n())}function oe(i,e){if(i&1){let t=M();a(0,"app-card",7),m("cardClicked",function(C){let O=g(t).$implicit,ee=s(2);return v(ee.flipCard(O,C))}),n()}if(i&2){let t=e.$implicit;c("card",t)}}function de(i,e){if(i&1&&(a(0,"div",4),V(1,oe,1,1,"app-card",5,N),H(3,"async"),n(),a(4,"div",6)(5,"p"),b(6),n()()),i&2){let t=s();d(),A(z(3,2,t.cardList$)),d(5),Y("",t.message,", ",t.cardsRemaining," cards remaining")}}var j=class i{cardShuffleService=h(p);cardList$=this.loadCards();firstCard;secondCard;message=o.pickACard;cardsRemaining=0;gameOver=!1;loadCards(){return this.cardShuffleService.getShuffledDeck().pipe(G(e=>this.cardsRemaining=e.length))}flipCard(e,t){t.stopPropagation(),e&&e.state!=="removed"&&(this.firstCard&&this.secondCard?this.resolveMatches():this.firstCard?this.firstCard.id!=e.id?(e.state="revealed",this.secondCard=e,this.checkForMatch()?this.message=o.matchSuccess:this.message=o.matchFailure):this.message=o.repickError:(e.state="revealed",this.firstCard=e,this.message=o.pickSecondCard))}resolveMatches(){this.firstCard&&this.secondCard&&(this.checkForMatch()?(this.firstCard.state="removed",this.secondCard.state="removed",this.cardsRemaining-=2,this.cardsRemaining<=0&&(this.gameOver=!0)):(this.firstCard.state="hidden",this.secondCard.state="hidden"),this.firstCard=void 0,this.secondCard=void 0,this.message=o.pickACard)}checkForMatch(){return!!(this.firstCard&&this.secondCard&&this.firstCard.value==this.secondCard.value)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=u({type:i,selectors:[["app-memory-game"]],standalone:!0,features:[k],decls:6,vars:1,consts:[[1,"game-window",3,"click"],[1,"game-header"],["mat-raised-button","","color","primary","routerLink",".."],[1,"game-over"],[1,"card-layout"],[3,"card"],[1,"game-footer"],[3,"cardClicked","card"]],template:function(t,r){t&1&&(a(0,"div",0),m("click",function(){return r.resolveMatches()}),a(1,"div",1)(2,"a",2),b(3,"Back to menu"),n()(),_(4,ne,2,0,"div",3)(5,de,7,4),n()),t&2&&(d(4),y(r.gameOver?4:5))},dependencies:[J,W,Q,S,f],styles:[".game-window[_ngcontent-%COMP%]{height:100%;width:100%}.game-header[_ngcontent-%COMP%], .game-footer[_ngcontent-%COMP%]{display:flex;justify-content:center}.game-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .game-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:1em}.card-layout[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.game-over[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;justify-content:center;align-items:center;font-size:5em;color:#000}"]})},Le=[{path:"",component:j}];export{j as MemoryGameComponent,Le as default};
